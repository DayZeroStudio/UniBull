<!DOCTYPE html>
<%- watchScript %>
<html lang="us">
	<link href="jqueryui/jquery-ui.css" rel="stylesheet">
	<style>
	body{
		font: 82.5% "Lucida Console", Monaco, monospace;
		margin: 50px;
	}
	.demoHeaders {
		margin-top: 2em;
	}
	#dialog-link {
		padding: .4em 1em .4em 20px;
		text-decoration: none;
		position: relative;
	}
	#dialog-link span.ui-icon {
		margin: 0 5px 0 0;
		position: absolute;
		left: .2em;
		top: 50%;
		margin-top: -8px;
	}
	#icons {
		margin: 0;
		padding: 0;
	}
	#icons li {
		margin: 2px;
		position: relative;
		padding: 4px 0;
		cursor: pointer;
		float: left;
		list-style: none;
	}
	#icons span.ui-icon {
		float: left;
		margin: 0 4px;
	}
	.fakewindowcontain .ui-widget-overlay {
		position: absolute;
	}
	select {
		width: 200px;
	}
    label {
        text-align:left;
    }
    #title{
        width: 100px;
    }
    #content{
        width: 200px;
    }
    #forum{
        width: 600px;
    }
    .submit_wrapper{
        display: none;
        text-align: left;
        border: thin solid;
        padding: 10px 10px;
    }
	</style> 
<head>
  <title>UniBull Class</title>
</head>

<body>
  <center><h1>Class Rooms</h1></center>
  <button id="homepage"> Home </button>
  <button id="logout"> Logout </button>
  <hr>
  <center><h1 id="classtitle"> CMPS 193 </h1></center>
  <hr>
    <div id="forum">
        <button id="newpost"> Submit a post </button><br><br>
        <div class="submit_wrapper" id="submit_wrapper">
            <form id="submitform" name="submitform" accept-charset="utf-8">
                <label for="title">Title</label><br>
                <input id="title" type="text" name="title" placeholder="Title"><br>
                <label for="content">Content</label><br>
                <input class ="submissioncontent" id="content" type="text" name="content" placeholder="Content goes here">
            </form> 
            <br>
            <button id="submit_post"> Submit </button>
        </div>
        <br><div id="accordion" class="accordion">
            <h3>First</h3>
            <div>Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet.</div>
            <h3>Second</h3>
            <div>Phasellus mattis tincidunt nibh.</div>
            <h3>Third</h3>
            <div>Nam dui erat, auctor a, dignissim quis.</div>
        </div>
    </div>
</body>

<script src="js/login-bundle.js"></script>
<script src="jqueryui/external/jquery/jquery.js"></script>
<script src="jqueryui/jquery-ui.js"></script>
<script>
function logout(name) {
    document.cookie = name+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;";
}
$("#homepage").button();
$("#homepage").click(function(){
    window.location.href = "/home";
});
$("#logout").button();
$("#logout").click(function(){
    logout("token");
    window.location.href = "/login";
});
$("#newpost").button();
$("#newpost").click(function(){
    $("#submit_wrapper").slideDown();
});
$("#submit_post").button();
$("#submit_post").click(function(){
    var title = $("#title").val();
    var content = $("#content").val()
    $("#accordion").append("<h3>" + title + "</h3><div>" + content + "</div>")
        .accordion("destroy").accordion();
    collapsible();
    $("#submit_wrapper").slideUp();
    $("#title").val("");
    $("#content").val("");
});
function collapsible(){
    $("#accordion").accordion({
        active: false,
        collapsible: true,
        heightStyle: "content",
        beforeActivate: function(event, ui) {
             // The accordion believes a panel is being opened
            if (ui.newHeader[0]) {
                var currHeader  = ui.newHeader;
                var currContent = currHeader.next('.ui-accordion-content');
             // The accordion believes a panel is being closed
            } else {
                var currHeader  = ui.oldHeader;
                var currContent = currHeader.next('.ui-accordion-content');
            }
             // Since we've changed the default behavior, this detects the actual status
            var isPanelSelected = currHeader.attr('aria-selected') == 'true';
             // Toggle the panel's header
            currHeader.toggleClass('ui-corner-all',isPanelSelected).toggleClass('accordion-header-active ui-state-active ui-corner-top',!isPanelSelected).attr('aria-selected',((!isPanelSelected).toString()));
            // Toggle the panel's icon
            currHeader.children('.ui-icon').toggleClass('ui-icon-triangle-1-e',isPanelSelected).toggleClass('ui-icon-triangle-1-s',!isPanelSelected);
             // Toggle the panel's content
            currContent.toggleClass('accordion-content-active',!isPanelSelected)    
            if (isPanelSelected) { currContent.slideUp(); }  else { currContent.slideDown(); }
            return false; // Cancels the default action
        }
    });
}
collapsible();


</script>

</html>
